<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alien Message Vault ğŸ‘½ğŸ›¸ by DreamXHava</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: url('https://wallpaperaccess.com/full/843532.jpg') no-repeat center center fixed;
    background-size: cover;
    color: #e0e0e0;
    text-align: center;
    padding: 30px 15px;
    margin: 0;
    position: relative;
    min-height: 100vh;
    overflow-x: hidden;
}

.overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(10, 5, 50, 0.78), rgba(5, 15, 70, 0.72));
    z-index: -2;
    pointer-events: none;
}

.alien-float {
    position: absolute;
    opacity: 0.14;
    pointer-events: none;
    z-index: -1;
    will-change: transform;
    font-size: clamp(1.8rem, 5vw, 3.2rem);
    animation: drift infinite ease-in-out;
}

.float-slow   { animation-duration: 140s; animation-delay: -20s; }
.float-medium { animation-duration: 95s;  animation-delay: -40s; }
.float-fast   { animation-duration: 70s;  animation-delay: -10s; }
.float-reverse{ animation-direction: reverse; }

#float1 { top: 10%;  left: 8%;  }
#float2 { top: 22%;  right: 12%; }
#float3 { bottom: 15%; left: 18%; }
#float4 { bottom: 28%; right: 20%; }
#float5 { top: 45%;  left: 25%;  }
#float6 { top: 60%;  right: 15%; }

@keyframes drift {
    0%   { transform: translate(0, 0)   rotate(0deg);   }
    20%  { transform: translate(60px, -50px)  rotate(8deg);  }
    40%  { transform: translate(-70px, 80px)  rotate(-6deg); }
    60%  { transform: translate(40px, -90px)  rotate(5deg);  }
    80%  { transform: translate(-50px, 60px)  rotate(-9deg); }
    100% { transform: translate(0, 0)   rotate(0deg);   }
}

.container {
    max-width: 760px;
    margin: 30px auto;
    background: rgba(15, 15, 55, 0.82);
    backdrop-filter: blur(6px);
    padding: 45px 35px;
    border-radius: 24px;
    border: 2px solid rgba(160, 140, 255, 0.45);
    box-shadow: 0 0 50px rgba(140, 100, 255, 0.3), inset 0 0 30px rgba(0,0,0,0.45);
    position: relative;
    z-index: 1;
}

.shiny-title {
    font-size: 2.8em;
    font-weight: bold;
    color: #ffffff;
    margin-bottom: 40px;
    text-shadow: 0 0 12px rgba(255, 255, 255, 0.4);
}

label {
    display: block;
    margin: 24px 0 14px;
    color: #b0d0ff;
    font-weight: bold;
    font-size: 1.15em;
}

textarea, input[type="text"] {
    width: 100%;
    padding: 18px;
    margin-bottom: 24px;
    background: rgba(10, 10, 45, 0.85);
    border: 2px solid rgba(160, 140, 255, 0.5);
    border-radius: 18px;
    color: #e0e0e0;
    font-size: 1.08em;
    transition: all 0.3s;
    resize: vertical;
}

textarea:focus, input[type="text"]:focus {
    border-color: #c0b0ff;
    box-shadow: 0 0 20px rgba(192, 176, 255, 0.4);
    outline: none;
}

button {
    background: rgba(25, 25, 85, 0.88);
    color: #b0d0ff;
    border: 2px solid #a080ff;
    padding: 14px 38px;
    margin: 8px 4px;
    border-radius: 50px;
    font-size: 1.12em;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.35s;
    box-shadow: 0 0 14px rgba(160, 128, 255, 0.4);
}

button:hover {
    background: linear-gradient(135deg, #a080ff, #80b0ff);
    color: white;
    transform: translateY(-4px);
    box-shadow: 0 0 30px rgba(160, 128, 255, 0.6);
}

.clear-btn { margin-bottom: 16px; }

.result-wrapper {
    margin: 50px 0 30px;
    position: relative;
}

#result-container {
    padding: 28px;
    background: rgba(5, 5, 35, 0.9);
    border: 2px solid rgba(160, 140, 255, 0.45);
    border-radius: 20px;
    min-height: 160px;
    max-height: 720px;
    font-size: 1.2em;
    word-wrap: break-word;
    text-align: left;
    overflow: auto;
    resize: vertical;
    box-shadow: inset 0 0 22px rgba(0,0,0,0.55);
}

#result-container::-webkit-scrollbar { width: 10px; }
#result-container::-webkit-scrollbar-track { background: rgba(10,10,45,0.75); }
#result-container::-webkit-scrollbar-thumb {
    background: linear-gradient(#c0b0ff, #a080ff);
    border-radius: 5px;
}

#copy-btn {
    position: absolute;
    top: -42px;
    right: 12px;
    background: rgba(20, 20, 80, 0.92);
    border: 1px solid #a080ff;
    color: #d0d0ff;
    font-size: 0.96em;
    padding: 9px 18px;
    border-radius: 14px;
    cursor: pointer;
    display: none;
    transition: all 0.3s;
}

#copy-btn.visible { display: inline-block; }

#copy-btn:hover {
    background: #a080ff;
    color: #000;
    box-shadow: 0 0 22px #a080ff;
    transform: scale(1.1);
}

.output-label {
    margin-top: 18px;
    display: block;
    font-weight: bold;
    color: #b0d0ff;
    font-size: 1.15em;
}

.github-link {
    margin-top: 70px;
    font-size: 1.18em;
    font-weight: bold;
    color: #d0d0ff;
}

.github-link a {
    color: #b0d0ff;
    text-decoration: none;
}

.note {
    font-size: 0.95em;
    color: #a0c0ff;
    margin: 20px 0 40px;
    line-height: 1.5;
}
</style>
</head>
<body>

<div class="overlay"></div>

<div class="alien-float float-slow"    id="float1">ğŸ‘½ğŸ›¸</div>
<div class="alien-float float-medium float-reverse" id="float2">ğŸ›¸ğŸ‘¾ğŸŒŒ</div>
<div class="alien-float float-fast"    id="float3">ğŸ‘½ğŸª</div>
<div class="alien-float float-slow"    id="float4">ğŸ§‘â€ğŸš€ğŸ‘½ğŸ›¸</div>
<div class="alien-float float-medium"  id="float5">ğŸŒ ğŸ‘¾</div>
<div class="alien-float float-fast float-reverse" id="float6">ğŸ›¸âœ¨ğŸ‘½</div>

<div class="container">
<h1 class="shiny-title">
Alien Message Vault ğŸ‘½ğŸ›¸ by DreamXHava
</h1>

<div class="note">
    Classic ciphers still work below~ but now you can also <strong>save secrets to Discord</strong> and retrieve them later with a code â™¡<br>
    <small>(Server must be running + bot online)</small>
</div>

<label>Transmit your secret alien message ğŸ‘½</label>
<textarea id="message" placeholder="Enter your secret here... ğŸŒŒ" rows="6"></textarea>

<label>Select action / cipher type ğŸ›°ï¸</label>
<select id="method">
    <option value="caesar">Classic #1 - Caesar Cipher ğŸª</option>
    <option value="vigenere">Classic #2 - VigenÃ¨re Cipher ğŸ‘½</option>
    <option value="rot13">Classic #3 - ROT13 ğŸ›¸</option>
    <option value="xor">Classic #4 - XOR Cipher ğŸŒ </option>
    <option value="base64rev">Classic #5 - Base64 + Reverse ğŸš€</option>
    <option value="save" selected>Save Secret to Vault ğŸ“¦ (new!)</option>
    <option value="retrieve">Retrieve Secret ğŸ” (enter code)</option>
</select>

<div style="margin: 30px 0;">
    <button onclick="processAction()">Execute âœ¨</button>
    <button class="clear-btn" onclick="clearAll()">Clear ğŸ§¹</button>
</div>

<div class="result-wrapper">
    <button id="copy-btn" onclick="copyResult()">Copy ğŸ“¡</button>
    <div id="result-container">
        <div id="result"></div>
    </div>
</div>

<label class="output-label">Incoming Transmission / Vault Result ğŸ“¡</label>

<div class="github-link">
    Visit My Github â†’ <a href="https://github.com/Savindudam" target="_blank">DreamXHava</a> ğŸ§‘â€ğŸš€âœ¨
</div>
</div>

<script>
const SERVER_URL = "http://localhost:3000"; // change if you deploy it somewhere
let currentResultText = "";

async function processAction() {
    const input = document.getElementById("message").value.trim();
    const method = document.getElementById("method").value;
    const resultDiv = document.getElementById("result");

    if (!input) {
        resultDiv.textContent = "Please type something first senpai~ :c";
        return;
    }

    resultDiv.textContent = "Processing... ğŸ‘½ğŸ›¸";

    try {
        if (method === "save") {
            const res = await fetch(`${SERVER_URL}/api/save`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ message: input })
            });

            const data = await res.json();

            if (data.success && data.code) {
                resultDiv.textContent = 
                    `Message saved in the vault!\n\n` +
                    `Your secret code: ${data.code}\n\n` +
                    `Use "Retrieve Secret" with this code later~ â™¡\n` +
                    `Keep it safe nya!`;
            } else {
                resultDiv.textContent = `Error: ${data.error || "Bot didn't respond :("}`;
            }
        } 
        else if (method === "retrieve") {
            const res = await fetch(`${SERVER_URL}/api/retrieve`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ code: input })
            });

            const data = await res.json();

            if (data.success && data.message) {
                resultDiv.textContent = 
                    `Secret retrieved successfully!\n\n` +
                    `${data.message}\n\n` +
                    `Enjoy your message senpai~ ğŸ’œ`;
            } else {
                resultDiv.textContent = `Error: ${data.error || "No message found for this code :c"}`;
            }
        } 
        else {
            // Classic ciphers
            let output = "";
            switch (method) {
                case "caesar":
                    output = caesarCipher(input, 17);
                    break;
                case "vigenere":
                    output = vigenereCipher(input, "DREAMXHAVA2026", true);
                    break;
                case "rot13":
                    output = rot13(input);
                    break;
                case "xor":
                    output = xorCipher(input, 137, true);
                    break;
                case "base64rev":
                    output = base64Reverse(input, true);
                    break;
            }
            resultDiv.textContent = output;
        }

        document.getElementById("copy-btn").classList.add("visible");
        currentResultText = resultDiv.textContent;
    } catch (err) {
        resultDiv.textContent = "Connection failed... is your server running? ğŸ›¸";
        console.error(err);
    }
}

function copyResult() {
    navigator.clipboard.writeText(currentResultText).then(() => {
        const btn = document.getElementById("copy-btn");
        btn.textContent = "Copied! ğŸ“¡";
        setTimeout(() => { btn.textContent = "Copy ğŸ“¡"; }, 1800);
    });
}

function clearAll() {
    document.getElementById("message").value = "";
    document.getElementById("result").textContent = "";
    document.getElementById("copy-btn").classList.remove("visible");
}

// â”€â”€â”€ Classic cipher functions (unchanged) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function caesarCipher(text, shift) {
    return text.replace(/[a-zA-Z]/g, c => {
        const base = c <= "Z" ? 65 : 97;
        return String.fromCharCode((c.charCodeAt(0) - base + shift + 26) % 26 + base);
    });
}

function vigenereCipher(text, key, encrypt) {
    let r="",j=0; key=key.toUpperCase();
    for (let c of text) {
        if (/[a-zA-Z]/.test(c)) {
            const b=c<="Z"?65:97,k=key[j++%key.length].charCodeAt(0)-65;
            r+=String.fromCharCode((c.charCodeAt(0)-b+(encrypt?k:-k)+26)%26+b);
        } else r+=c;
    }
    return r;
}

function rot13(t){return caesarCipher(t,13);}

function xorCipher(t,k,e){
    return e?btoa([...t].map(c=>String.fromCharCode(c.charCodeAt(0)^k)).join("")):
    [...atob(t)].map(c=>String.fromCharCode(c.charCodeAt(0)^k)).join("");
}

function base64Reverse(t,e){
    return e?btoa(unescape(encodeURIComponent(t))).split("").reverse().join("")
    :decodeURIComponent(escape(atob(t.split("").reverse().join(""))));
}
</script>
</body>
</html>